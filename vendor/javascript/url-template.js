var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,n){t=n()})(t,(function(){function UrlTemplate(){}UrlTemplate.prototype.encodeReserved=function(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map((function(e){/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]"));return e})).join("")};UrlTemplate.prototype.encodeUnreserved=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))};UrlTemplate.prototype.encodeValue=function(e,t,n){t="+"===e||"#"===e?this.encodeReserved(t):this.encodeUnreserved(t);return n?this.encodeUnreserved(n)+"="+t:t};UrlTemplate.prototype.isDefined=function(e){return void 0!==e&&null!==e};UrlTemplate.prototype.isKeyOperator=function(e){return";"===e||"&"===e||"?"===e};UrlTemplate.prototype.getValues=function(t,n,r,i){var o=t[r],s=[];if(this.isDefined(o)&&""!==o)if("string"===typeof o||"number"===typeof o||"boolean"===typeof o){o=o.toString();i&&"*"!==i&&(o=o.substring(0,parseInt(i,10)));s.push(this.encodeValue(n,o,this.isKeyOperator(n)?r:null))}else if("*"===i)Array.isArray(o)?o.filter((this||e).isDefined).forEach((function(e){s.push(this.encodeValue(n,e,this.isKeyOperator(n)?r:null))}),this||e):Object.keys(o).forEach((function(e){this.isDefined(o[e])&&s.push(this.encodeValue(n,o[e],e))}),this||e);else{var u=[];Array.isArray(o)?o.filter((this||e).isDefined).forEach((function(e){u.push(this.encodeValue(n,e))}),this||e):Object.keys(o).forEach((function(e){if(this.isDefined(o[e])){u.push(this.encodeUnreserved(e));u.push(this.encodeValue(n,o[e].toString()))}}),this||e);this.isKeyOperator(n)?s.push(this.encodeUnreserved(r)+"="+u.join(",")):0!==u.length&&s.push(u.join(","))}else";"===n?this.isDefined(o)&&s.push(this.encodeUnreserved(r)):""!==o||"&"!==n&&"?"!==n?""===o&&s.push(""):s.push(this.encodeUnreserved(r)+"=");return s};UrlTemplate.prototype.parse=function(t){var n=this||e;var r=["+","#",".","/",";","?","&"];return{expand:function(e){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(t,i,o){if(i){var s=null,u=[];if(-1!==r.indexOf(i.charAt(0))){s=i.charAt(0);i=i.substr(1)}i.split(/,/g).forEach((function(t){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);u.push.apply(u,n.getValues(e,s,r[1],r[2]||r[3]))}));if(s&&"+"!==s){var a=",";"?"===s?a="&":"#"!==s&&(a=s);return(0!==u.length?s:"")+u.join(a)}return u.join(",")}return n.encodeReserved(o)}))}}};return new UrlTemplate}));var n=t;export default n;

